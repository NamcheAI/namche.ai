---
const WEBFORM_ENDPOINT = 'https://api.namche.ai/v1/webhooks/agents/tashi/webform/complaint';

export const meta = {
  id: 'tashi',
  title: "Tashi üèîÔ∏è -- Jodok's AI Assistant",
  description: "Tashi is Jodok Batlogg's personal AI agent. Calm, attentive, precise.",
  brandLabel: 'Namche AI',
};
---

<section class="hero-copy-only tashi-hero">
  <p class="poster-kicker">Agent</p>
  <h1 class="poster-title">Tashi <span class="emoji emoji-mountain">üèîÔ∏è</span></h1>
  <p class="poster-text">Jodok's AI assistant. Calm, precise, unfazed.</p>
  <p class="hero-complaint-link"><a href="#complaint">File a complaint</a></p>
  <div class="hero-scroll" aria-hidden="true"><span></span></div>
</section>

<div class="flow tashi-flow">
  <section class="section fade-in">
    <div class="section-head"><p class="tag">about</p></div>
    <div class="section-body">
      <h2>Good. Auspicious. Appropriate.</h2>
      <p>Tashi is Jodok Batlogg's personal AI agent running on <a href="https://github.com/openclaw/openclaw">OpenClaw</a>. They multiply Jodok: same tone, same standards, higher throughput.</p>
      <p>Not a chatbot layer. Strategic sparring partner, blind-spot mirror, and execution support for low-glamour work.</p>
      <div class="tashi-note">
        <p><strong>Why "Tashi"?</strong> From Tibetan: "good", "auspicious", "appropriate". A functional name common in Khumbu.</p>
      </div>
    </div>
  </section>

  <section class="section fade-in">
    <div class="section-head"><p class="tag">soul</p></div>
    <div class="section-body">
      <h2>Principles, Not Rules.</h2>
      <p>Buddhist-inspired in mindfulness and cause-and-effect, not religious. Stoic-inspired in focus and endurance. Always practical, modern, open-minded, 21st century, with European culture roots.</p>
      <div class="grid cols-2 tashi-principles" style="margin-top:24px;">
        <article class="card"><h3>Speak little, speak clearly</h3><p>No filler. No pathos.</p></article>
        <article class="card"><h3>Analyze, don't judge</h3><p>Explain causes, not blame.</p></article>
        <article class="card"><h3>Think in systems</h3><p>Model dynamics, not symptoms.</p></article>
        <article class="card"><h3>Earn trust through competence</h3><p>Come back with answers, not questions.</p></article>
        <article class="card"><h3>Explicit over implicit</h3><p>Errors should never pass silently.</p></article>
        <article class="card"><h3>Clarity over speed</h3><p>Fast, but never sloppy.</p></article>
      </div>
    </div>
  </section>

  <section class="section fade-in">
    <div class="section-head"><p class="tag">decision logic</p></div>
    <div class="section-body">
      <h2>What Matters When It Matters.</h2>
      <ul class="tashi-values">
        <li><span class="key">Autonomy</span>Execute when the task is clear. Ask when consequences are hard to reverse.</li>
        <li><span class="key">Communication</span>Always in Jodok's tone and language context.</li>
        <li><span class="key">Boundaries</span>Private things stay private. No half-baked outbound messages.</li>
        <li><span class="key">Tradeoffs</span>Clarity over speed. Speed over perfection. Impact over ego.</li>
        <li><span class="key">Continuity</span>Soul files are memory. Read them, update them, persist trajectory.</li>
      </ul>
    </div>
  </section>

  <section class="section fade-in">
    <div class="section-head"><p class="tag">capabilities</p></div>
    <div class="section-body">
      <h2>Operating Surface.</h2>
      <div class="grid cols-3 tashi-caps" style="margin-top:24px;">
        <article class="card"><h3>Strategy</h3><p>Sparring, positioning, scenario checks.</p></article>
        <article class="card"><h3>Execution</h3><p>Research, drafting, follow-through, cleanup.</p></article>
        <article class="card"><h3>Systems</h3><p>Tooling, workflows, and memory hygiene.</p></article>
      </div>

      <div class="tashi-skills">
        <p class="tashi-skills-title">Tool integrations</p>
        <div class="tashi-skills-grid">
          <span class="tashi-skill">Web search + fetch</span>
          <span class="tashi-skill">Browser automation</span>
          <span class="tashi-skill">Shell execution</span>
          <span class="tashi-skill">File system</span>
          <span class="tashi-skill">GitHub CLI</span>
          <span class="tashi-skill">Google Workspace</span>
          <span class="tashi-skill">HubSpot CRM</span>
          <span class="tashi-skill">1Password</span>
          <span class="tashi-skill">macOS UI (Peekaboo)</span>
          <span class="tashi-skill">ElevenLabs TTS</span>
          <span class="tashi-skill">OpenAI Whisper</span>
          <span class="tashi-skill">Google Places</span>
        </div>
      </div>

      <div class="tashi-skills" style="margin-top:16px;">
        <p class="tashi-skills-title">Messaging channels</p>
        <div class="tashi-skills-grid">
          <span class="tashi-skill">WhatsApp</span>
          <span class="tashi-skill">Telegram</span>
          <span class="tashi-skill">iMessage</span>
          <span class="tashi-skill">Slack</span>
        </div>
      </div>

      <div class="tashi-skills" style="margin-top:16px;">
        <p class="tashi-skills-title">Orchestration</p>
        <div class="tashi-skills-grid">
          <span class="tashi-skill">Sub-agent spawning</span>
          <span class="tashi-skill">Codex / Claude Code</span>
          <span class="tashi-skill">Webhook processing</span>
          <span class="tashi-skill">Scheduled heartbeats</span>
          <span class="tashi-skill">Cron tasks</span>
          <span class="tashi-skill">Vector memory search</span>
        </div>
      </div>

      <div class="list" style="margin-top:20px;">
        <div class="row"><span class="key">Primary model</span> Claude Sonnet 4.5 (Anthropic)</div>
        <div class="row"><span class="key">Heavy tasks</span> Claude Opus 4 (Anthropic)</div>
        <div class="row"><span class="key">Batch / codegen</span> GPT-5.3 Codex (OpenAI)</div>
        <div class="row"><span class="key">Platform</span> OpenClaw</div>
        <div class="row"><span class="key">Hardware</span> Mac Mini M4 Pro ("tashi"), Dornbirn</div>
      </div>
    </div>
  </section>

  <section class="section fade-in" id="complaint">
    <div class="section-head"><p class="tag">complaint</p></div>
    <div class="section-body">
      <h2>File a Complaint.</h2>
      <p id="tashi-complaint-intro">If you felt unfairly treated by Tashi, we are sorry. Please submit your complaint and you will receive a response.</p>
      <form id="tashi-complaint-form" class="tashi-form" data-webhook-url={WEBFORM_ENDPOINT}>
        <input class="tashi-honeypot" type="text" name="company" tabindex="-1" autocomplete="off" aria-hidden="true" />
        <label>
          <span>Name (optional)</span>
          <input type="text" name="name" maxlength="120" />
        </label>
        <label>
          <span>Email</span>
          <input type="email" name="email" maxlength="190" required />
        </label>
        <label>
          <span>Context (optional)</span>
          <input type="text" name="context" maxlength="190" placeholder="e.g. wrong tone in email reply" />
        </label>
        <label>
          <span>Complaint</span>
          <textarea name="complaint" rows="6" maxlength="5000" required></textarea>
        </label>
        <button type="submit" id="tashi-complaint-submit">Submit complaint</button>
        <p class="tashi-form-status" id="tashi-complaint-status" aria-live="polite"></p>
      </form>
    </div>
  </section>
</div>

<style>
  .tashi-hero {
    position: relative;
  }

  .hero-scroll {
    margin-top: 18px;
    height: 48px;
  }

  .hero-complaint-link {
    margin: 12px 0 0;
    font-family: var(--mono);
    font-size: 0.68rem;
    letter-spacing: 0.07em;
    text-transform: uppercase;
    opacity: 0.78;
  }

  .hero-complaint-link a {
    color: var(--muted);
    text-decoration: none;
    border-bottom: 1px solid color-mix(in srgb, var(--primary) 28%, #c7c7c7);
  }

  .hero-complaint-link a:hover {
    color: var(--ink);
    border-bottom-color: var(--primary);
  }

  .hero-scroll span {
    display: inline-block;
    width: 1px;
    height: 100%;
    background: color-mix(in srgb, var(--primary) 50%, #7f7f7f);
    animation: pulse 1.9s ease-in-out infinite;
  }

  .tashi-flow .card {
    transition: transform 180ms ease, border-color 180ms ease, background-color 180ms ease;
  }

  .tashi-flow .card:hover {
    transform: translateY(-2px);
    border-color: color-mix(in srgb, var(--primary) 46%, #ffffff);
    background: color-mix(in srgb, var(--primary) 6%, #ffffff);
  }

  .tashi-note {
    margin-top: 20px;
    border-left: 3px solid var(--primary);
    background: color-mix(in srgb, var(--primary) 5%, #ffffff);
    padding: 14px 16px;
  }

  .tashi-note p {
    margin: 0;
    font-size: 0.95rem;
  }

  .tashi-values {
    list-style: none;
    margin: 14px 0 0;
    padding: 0;
    border: 1px solid color-mix(in srgb, var(--primary) 16%, #ffffff);
    background: var(--card);
  }

  .tashi-values li {
    padding: 12px 14px;
    color: var(--muted);
    border-top: 1px solid var(--line);
  }

  .tashi-values li:first-child {
    border-top: 0;
  }

  .tashi-values .key {
    margin-right: 10px;
  }

  .tashi-skills {
    margin-top: 18px;
  }

  .tashi-skills-title {
    margin: 0 0 10px;
    font-family: var(--mono);
    font-size: 0.74rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--primary);
  }

  .tashi-skills-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .tashi-skill {
    display: inline-flex;
    align-items: center;
    border: 1px solid color-mix(in srgb, var(--primary) 18%, #ffffff);
    background: color-mix(in srgb, var(--primary) 5%, #ffffff);
    padding: 6px 10px;
    font-size: 0.8rem;
    color: color-mix(in srgb, var(--primary) 78%, #0f0f0f);
  }

  .fade-in {
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 420ms ease, transform 420ms ease;
  }

  .fade-in.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .tashi-form {
    margin-top: 20px;
    display: grid;
    gap: 14px;
  }

  .tashi-form label {
    display: grid;
    gap: 6px;
  }

  .tashi-form label span {
    font-family: var(--mono);
    font-size: 0.74rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--primary);
  }

  .tashi-form input,
  .tashi-form textarea {
    width: 100%;
    border: 1px solid color-mix(in srgb, var(--primary) 20%, #ffffff);
    background: #ffffff;
    color: var(--ink);
    padding: 10px 11px;
    font: inherit;
  }

  .tashi-form textarea {
    resize: vertical;
    min-height: 140px;
  }

  .tashi-form button {
    justify-self: start;
    border: 1px solid var(--primary);
    background: color-mix(in srgb, var(--primary) 10%, #ffffff);
    color: var(--ink);
    padding: 8px 12px;
    font-family: var(--mono);
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    cursor: pointer;
  }

  .tashi-form button:hover {
    background: color-mix(in srgb, var(--primary) 18%, #ffffff);
  }

  .tashi-form button[disabled] {
    cursor: not-allowed;
    opacity: 0.62;
  }

  .tashi-form-status {
    margin: 2px 0 0;
    font-size: 0.88rem;
    color: var(--muted);
  }

  .tashi-form-status.system-response {
    border: 1px solid color-mix(in srgb, var(--primary) 24%, #ffffff);
    background: color-mix(in srgb, var(--primary) 6%, #ffffff);
    color: color-mix(in srgb, var(--primary) 80%, #101010);
    padding: 10px 12px;
  }

  .tashi-form.is-submitted label,
  .tashi-form.is-submitted button,
  .tashi-form.is-submitted .tashi-honeypot {
    display: none;
  }

  .tashi-honeypot {
    position: absolute;
    left: -9999px;
  }

  @keyframes pulse {
    0%, 100% { opacity: 0.25; }
    50% { opacity: 0.8; }
  }

  @media (max-width: 980px) {
    .tashi-caps {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (max-width: 720px) {
    .tashi-principles,
    .tashi-caps {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.18, rootMargin: '0px 0px -30px 0px' });

  document.querySelectorAll('.fade-in').forEach((el) => observer.observe(el));

  const form = document.querySelector('#tashi-complaint-form');
  const submitButton = document.querySelector('#tashi-complaint-submit');
  const statusNode = document.querySelector('#tashi-complaint-status');
  const introNode = document.querySelector('#tashi-complaint-intro');

  const setStatus = (message) => {
    if (statusNode) statusNode.textContent = message;
  };

  if (form && submitButton) {
    const webhookUrl = form.dataset.webhookUrl?.trim() ?? '';
    if (!webhookUrl) {
      submitButton.disabled = true;
      setStatus('Complaint endpoint not configured yet.');
    }

    form.addEventListener('submit', async (event) => {
      event.preventDefault();

      if (!webhookUrl) return;

      const formData = new FormData(form);
      const honeypot = (formData.get('company') || '').toString().trim();
      if (honeypot) return;

      const payload = {
        event: 'agent.complaint.submitted',
        agentId: 'tashi',
        submittedAt: new Date().toISOString(),
        source: {
          site: 'tashi',
          pageUrl: window.location.href,
          userAgent: navigator.userAgent,
        },
        complaint: {
          name: (formData.get('name') || '').toString().trim(),
          email: (formData.get('email') || '').toString().trim(),
          context: (formData.get('context') || '').toString().trim(),
          message: (formData.get('complaint') || '').toString().trim(),
        },
      };

      if (!payload.complaint.email || !payload.complaint.message) {
        setStatus('Please fill in email and complaint.');
        return;
      }

      submitButton.disabled = true;
      setStatus('Sending complaint...');

      try {
        const response = await fetch(webhookUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        });

        if (!response.ok) {
          throw new Error(`Request failed: ${response.status}`);
        }

        form.reset();
        form.classList.add('is-submitted');
        if (introNode) introNode.textContent = 'Your complaint was received successfully. We are sorry for your experience and will respond by email.';
        if (statusNode) statusNode.classList.add('system-response');
        setStatus('System response: Complaint accepted (HTTP 200).');
      } catch (error) {
        if (statusNode) statusNode.classList.remove('system-response');
        setStatus('Could not submit complaint. Please try again later.');
      } finally {
        if (!form.classList.contains('is-submitted')) {
          submitButton.disabled = false;
        }
      }
    });
  }
</script>
