---
import Base from '../../layouts/Base.astro';
import { isSiteId, listSiteIds, SITES } from '../../sites';

export function getStaticPaths() {
  if (import.meta.env.PROD) {
    return [];
  }
  return listSiteIds().map((site) => ({ params: { site } }));
}

const siteParam = Astro.params.site;
if (!siteParam || !isSiteId(siteParam)) {
  throw new Error(`Invalid site param: ${siteParam ?? 'undefined'}`);
}

const { meta, component: SitePage } = SITES[siteParam];
---

<Base title={`${meta.title} | Agent Preview`} description={meta.description} brandLabel={meta.brandLabel} siteId={siteParam}>
  <SitePage />
</Base>
